<!DOCTYPE html>
<html>
  <head>
    <title>Aurinkoenergiakartta</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>

    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAQHuFYJIh34nCs6Oq6897yJ8W0390L0bE&sensor=false">
    </script>

<script type="text/javascript">

/* CoorMapType is here for debugging puposes. When overlayed on the map, is shows useful details of the tiles: zoom level and the image path */

function CoordMapType(tileSize) {
  this.tileSize = tileSize;
}

CoordMapType.prototype.getTile = function(coord, zoom, ownerDocument) {

  var bound = Math.pow(2, zoom);
  var div = ownerDocument.createElement('div');
  
  div.innerHTML = coord + "/" + zoom + "/" + coord.x + "/" + (bound - coord.y - 1) + ".png";
  div.style.width = this.tileSize.width + 'px';
  div.style.height = this.tileSize.height + 'px';
  div.style.fontSize = '10';
  div.style.borderStyle = 'solid';
  div.style.borderWidth = '1px';
  div.style.borderColor = '#AAAAAA';
  return div;
};

/* ------------------------------------------------------------------------------------------------------------------------------------------ */

var solarTypeOptions = {
  getTileUrl: function(coord, zoom) {
    var bound = Math.pow(2, zoom);
    return "https://raw.github.com/ahlstrom/EnergiatietoSolar/master/mapTIles" + "/" + zoom + "/" + coord.x + "/" + (bound - coord.y - 1) + ".png";
  },
  tileSize: new google.maps.Size(256, 256),
  maxZoom: 20,
  minZoom: 8,
  name: "Solar",
  opacity: 1.0
};

var helsinki = new google.maps.LatLng(60.24, 24.94);
var espoo = new google.maps.LatLng(60.2052, 24.660);

var grayStyle = [
	{
    "featureType": "landscape.natural",
    "elementType": "geometry.fill",
    "stylers": [ { "color": "#ffffff" } ]
  },{
    "featureType": "water",
    "stylers": [ { "color": "#9fa0a0" } ]
  },{
    "featureType": "poi",
    "stylers": [ { "color": "#ffffff" } ]
  },{
    "featureType": "road",
    "elementType": "geometry.fill",
    "stylers": [ { "color": "#ffffff" } ]
  },{
    "featureType": "road",
    "elementType": "labels.text.stroke",
    "stylers": [ { "color": "#ffffff" } ]
  },{
    "featureType": "road",
    "elementType": "labels.icon",
    "stylers": [ { "visibility": "off" } ]
  },{
    "stylers": [ { "saturation": -100 } ]
  }
];

var mapOptions = {
  center: espoo,
  zoom: 12,
  disableDefaultUI: true,
  panControl: false,
  zoomControl: true,
  mapTypeControl: false,
  scaleControl: true,
  streetViewControl: false,
  overviewMapControl: false,
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  styles: grayStyle
};

function initialize() {
  var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
	var solarMapType = new google.maps.ImageMapType(solarTypeOptions); 
	
  map.overlayMapTypes.insertAt(0,solarMapType);
  //map.overlayMapTypes.insertAt(1, new CoordMapType(new google.maps.Size(256, 256))); /* For debugging, if necessary. */
}


</script>

</head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>